#include "game.h"
#include "player.h"

bool player_new(Player_T **player, SDL_Renderer *renderer, SDL_Texture *image)
{
	*player = calloc(1, sizeof(Ball_T));
        if (*player == NULL)
        {
                fprintf(stderr, "Error in calloc of new player.\n");
                return true;
        }
	Player_T *p = *player;
	p->renderer = renderer;
	p->player1 = image;
	if (SDL_QueryTexture(p->player1, NULL, NULL, &p->player1_rect.w, &p->player1_rect.h))
	{
		fprintf(stderr, "Error in querying player texture: %s\n", SDL_GetError());
		 return true;
	}
	printf("ww %d\n", p->player1_rect.w);
	p->player1_rect.w = 50;
	printf("player %d\n", p->player1_rect.w);
	p->player1_rect.w = 80;
	player_reset(p);
	return true;
}

void player_reset(Player_T *p)
{
	p->player1_rect.x = 0;
	p->player1_rect.y = 20;
}

void player_draw(Player_T *p)
{
	SDL_RenderCopy(p->renderer, p->player1, NULL, &p->player1_rect);
}

void player_free(Player_T **player)
{
	if (*player)
	{
		Player_T *p = *player;
		SDL_DestroyTexture(p->player1);
		p->player1 = NULL;
		p->renderer = NULL;
		free(p);
		p = NULL;
		*player = NULL;
	}
}
